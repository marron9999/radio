<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="x-ua-compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Radio</title>
<style>
body > .em1 {
	margin-left:1em;
}
body > .em2 {
	margin-left:2em;
}
</style>
</head>
<body>
<div class=em1><b>3D迷路の会話インタフェース</b></div>
<ul>
<li>利用するバンドは 83 です</li>
<li>グループは 0 から 255 まで使えます</li>
<li>グループの利用者がいなくなると迷路は再作成されます</li>
<li>グループは「group 数字」を送信すると変更できます</li>
<li>グループの数値により迷路の大きさが決まります</li>
<li>グループ 0 は通路サイズ 10 x 10 の大きさです<br>
通路サイズには壁を含みません<br>
地図サイズは 通路サイズ×2＋1 となります</li>
<li>グループの数が 1 増えるごとに 1つずつ大きくなります</li>
<li>グループ 40 以上は 40 の大きさに固定です</li>
<li>グループに接続している人は、だれでも操作できます</li>
<li>コマンド文字列を送信すると迷路を操作できます</li>
</ul>

<div class=em1><b>コマンド文字列</b></div>
<ul>
<li>「band 83」、「group グループ」、「S:s」を連続して送信すると最初の迷路データを受信できます</li>
<li>「S:o 横座標 縦座標」を送信すると座標位置の扉を開きます（通路に変更します）<br>
補足）既に競技者より開かれた場合は何も変化しません</li>
<li>「S:v 横座標 縦座標 方向」を送信すると迷路データの視界情報（T）、現在位置（Y）、競技者情報（P）と3D描画情報（V）を受信できます</li>
<li>「S:r」を送信すると迷路全体が複数の「R 縦座標 横種別」で受信できます</li>
<li>他利用者が行動すると迷路データの視界情報（T）、競技者情報（P）が送信されてきます（受信できます）</li>
</ul>

<div class=em1><b>迷路データ</b></div>
<ul>
<li>迷路の大きさ：「S:S 横サイズ 縦サイズ」</li>
<li>マップ情報：「S:M 縦座標 横種別」<br>
座標は 0 から始まる値で 320未満の数です<br>
（Scratchスプライトの座標にしたいときは -160 を加えます）<br>
横種別は各横座標に対応する種別を連結したものです<br>
種別は 0：通路、1：壁、2：扉、3：ゴール、9：不明 です</li>
<li>ゴールの位置：「S:G 横座標 縦座標」</li>
<li>現在位置：「S:Y 横座標 縦座標」</li>
<li>競技者情報の開始：「S:P B」</li>
<li>競技者情報の終了：「S:P E」</li>
<li>競技者情報：「S:pp 横座標 縦座標 方向」<br>
方向は 0：↑、3：→、6：↓、9：←↑ です<br>
競技者情報には自分自身（現在位置（y））も含みます</li>
<li>視界情報：「S:T 横座標 縦座標 方向 種別」</li>
<li>3D描画情報の開始：「S:V B」</li>
<li>3D描画情報の終了：「S:V E」</li>
<li>3D描画情報：「S:V 種別 座標データ」<br>
座標データは４つの点をそれぞれ 横座標 縦座標 で並べたものです</li>
</ul>

<div class=em1><b>迷路データの例</b></div>
<img class=em2 src=maze/docs-maze.png>
<pre class=em2><code>S:S 21 21
S:M 0 111111111111111111111
S:M 1 199999999999999999991
S:M 2 199999999999999999991
S:M 3 139999999999999999991
S:M 4 199999999999999999991
S:M 5 199999999999999999991
S:M 6 199999999999999999991
S:M 7 199999999999999999991
S:M 8 199999999999999999991
S:M 9 199999999999999999991
S:M 10 199999999999999999101
S:M 11 199999999999999999201
S:M 12 199999999999999999101
S:M 13 199999999999999999001
S:M 14 199999999999999999101
S:M 15 199999999999999999101
S:M 16 199999999999999999101
S:M 17 199999999999999999001
S:M 18 199999999999999999101
S:M 19 199999999999999999101
S:M 20 111111111111111111111
S:G 1 3
S:T 19 19 0 0000000000
S:T 18 19 0 1101110121
S:T 20 19 0 1111111111
S:Y 19 19 0
S:P B
S:P 19 19 0
S:P E
S:V B
S:V 1 14 7 0 0 0 140 14 133
S:V 1 280 0 266 7 266 133 280 140
S:V 1 28 14 14 7 14 133 28 126
S:V 1 266 7 252 14 252 126 266 133
S:V 0 28 21 42 21 42 119 28 119
S:V 1 252 14 238 21 238 119 252 126
S:V 1 56 28 42 21 42 119 56 112
S:V 1 238 21 224 28 224 112 238 119
S:V 1 70 35 56 28 56 112 70 105
S:V 1 224 28 210 35 210 105 224 112
S:V 1 84 42 70 35 70 105 84 98
S:V 1 210 35 196 42 196 98 210 105
S:V 0 84 49 98 49 98 91 84 91
S:V 1 196 42 182 49 182 91 196 98
S:V 1 112 56 98 49 98 91 112 84
S:V 1 182 49 168 56 168 84 182 91
S:V 2 126 63 112 56 112 84 126 77
S:V 1 168 56 154 63 154 77 168 84
S:V 1 140 70 126 63 126 77 140 70
S:V 1 154 63 140 70 140 70 154 77
S:V E
</code></pre>
</body>
</html>
